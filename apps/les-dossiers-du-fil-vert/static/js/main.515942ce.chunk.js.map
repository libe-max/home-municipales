{"version":3,"sources":["serviceWorker.js","components/Tile/index.js","components/SmallTile/index.js","components/CategoryIndex/index.js","components/FiltersBlock/index.js","App.js","index.js","config.js"],"names":["Boolean","window","location","hostname","match","Tile","c","this","props","photoStyle","backgroundImage","photo_url","classes","push","pos","active","subscribers","className","join","onClick","toggleActive","href","article_url","target","style","Slug","slug","BlockTitle","textSizes","JSXInterpreter","content","display_title","Component","SmallTile","Paragraph","original_title","Annotation","LogoGlyph","display_date","small","CategoryIndex","state","nb_displayed","handleShowMoreClick","bind","setState","category","articles","length","big","category_name","slice","map","art","key","Math","random","toString","FiltersBlock","handleFilterClick","e","cat","activeCategory","categories","categoriesWithDots","activateCategory","forEach","catClasses","disabled","pop","App","nb_tiles","Object","defineProperty","get","LBLB_GLOBAL","current_display","loading_sheet","error_sheet","data_sheet","keystrokes_history","konami_mode","active_category","scrolled","fetchSheet","fetchCredentials","listenToKeyStrokes","watchForKonamiCode","isInFilter","scrollToFirstActiveArticle","toggleScrolledState","document","addEventListener","spreadsheet","removeEventListener","nextState","changedKeys","keys","includes","api_url","tracking","format","article","api","fetch","method","reach","json","response","_credentials","lblb_tracking","lblb_posting","console","error","Error","sheet","ok","text","data","parsedData","parseTsv","querySelector","innerHTML","status","keyCode","currHistory","newHistory","nextCategory","scrollTo","top","left","behavior","indexOfFirst","findIndex","destinationPosition","getBoundingClientRect","y","scrollY","navHeight","nav_height","rem","pScrollY","categoriesWithRank","found","find","occurences","currentCategory","currentCategoryName","noCapNoHtmlCurrentCategoryName","toLowerCase","replace","tweetText","articlesInCurrentCategory","filter","nbOfTilesToDisplay","hideCurrentCategoryInSmallTiles","Loader","LoadingError","Svg","src","PageTitle","AnnotationTitle","i","log","dataCategory","regular","categoryArticles","ShareArticle","short","iconsOnly","tweet","url","meta","LibeLaboLogo","AppWrapper","getElementsHeight","breakpoints","lg","min","max","Infinity","md","sm","name","client_width","setInterval","clearInterval","config","show_header","headerScript","createElement","setAttribute","body","appendChild","$nav","$body","pNavHeight","pBodyPaddingTop","body_padding_top","pClientWidth","pClientHeight","client_height","offsetHeight","bodyPaddingTop","parseFloat","getComputedStyle","clientWidth","documentElement","clientHeight","pCurrentDisplay","dispatchEvent","CustomEvent","statics_url","stylesheet","title","description","author","image","id","Helmet","rel","property","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister","protocol","xiti_id","module","exports"],"mappings":"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","file":"static/js/main.515942ce.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React, { Component } from 'react'\nimport Slug from 'libe-components/lib/text-levels/Slug'\nimport BlockTitle from 'libe-components/lib/text-levels/BlockTitle'\nimport JSXInterpreter from 'libe-components/lib/logic/JSXInterpreter'\n\nexport default class Tile extends Component {\n  /* * * * * * * * * * * * * * * * *\n   *\n   * CONSTRUCTOR\n   *\n   * * * * * * * * * * * * * * * * */\n  constructor () {\n    super()\n    this.c = 'home-municipales__tile'\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * RENDER\n   *\n   * * * * * * * * * * * * * * * * */\n  render () {\n    const { c, props } = this\n\n    /* Inner logic */\n    const photoStyle = {\n      backgroundImage: `url(${props.photo_url})`\n    }\n\n    /* Assign classes */\n    const classes = [c]\n    classes.push(`${c}_${props.pos}`)\n    if (props.active) classes.push(`${c}_active`)\n    if (props.subscribers && props.subscribers !== '0') classes.push(`${c}_subscribers-only`)\n\n    /* Display */\n    return <div\n      className={classes.join(' ')}\n      onClick={this.toggleActive}>\n      <a href={props.article_url} target='blank'>\n        <div className={`${c}-inner`}>\n          <div className={`${c}-photo`} style={photoStyle} />\n          <div className={`${c}-titles`}>\n            <div className={`${c}-slug-and-subscribers`}>\n              <div className={`${c}-slug`}><Slug>{props.slug}</Slug></div>\n              <div className={`${c}-subscribers-only`}><Slug>Abonnés</Slug></div>\n            </div>\n            <div className={`${c}-title`}>\n              <BlockTitle {...props.textSizes}>\n                <JSXInterpreter content={props.display_title} />\n              </BlockTitle>\n            </div>\n          </div>\n        </div>\n      </a>\n    </div>\n  }\n}\n","import React, { Component } from 'react'\nimport Slug from 'libe-components/lib/text-levels/Slug'\nimport Paragraph from 'libe-components/lib/text-levels/Paragraph'\nimport Annotation from 'libe-components/lib/text-levels/Annotation'\nimport LogoGlyph from 'libe-components/lib/blocks/LogoGlyph'\nimport JSXInterpreter from 'libe-components/lib/logic/JSXInterpreter'\n\nexport default class SmallTile extends Component {\n  constructor () {\n    super()\n    this.c = 'home-municipales__small-tile'\n  }\n\n  render () {\n    const { c, props } = this\n\n    /* Inner logic */\n    const photoStyle = {\n      backgroundImage: `url(${props.photo_url})`\n    }\n\n    /* Assign classes */\n    const classes = [c]\n    if (props.subscribers && props.subscribers !== '0') classes.push(`${c}_subscribers-only`)\n\n    /* Display */\n    return <div className={classes.join(' ')}>\n      <a href={props.article_url} target='blank'>\n        <div className={`${c}-inner`}>\n          <div className={`${c}-titles`}>\n            <div className={`${c}-title`}>\n              <Paragraph>\n                <JSXInterpreter content={props.display_title || props.original_title || 'Article sans titre'} />\n              </Paragraph>\n            </div>\n            <div className={`${c}-date`}>\n              <Annotation>\n                <LogoGlyph />&nbsp;&nbsp;\n                {props.display_date}&nbsp;&nbsp;\n                <span className={`${c}-subscribers-only`}><Slug small>Abonnés</Slug></span>\n              </Annotation>\n            </div>\n          </div>\n          <div className={`${c}-photo`} style={photoStyle} />\n        </div>\n      </a>\n    </div>\n  }\n}\n","import React, { Component } from 'react'\nimport Slug from 'libe-components/lib/text-levels/Slug'\nimport Paragraph from 'libe-components/lib/text-levels/Paragraph'\nimport JSXInterpreter from 'libe-components/lib/logic/JSXInterpreter'\nimport SmallTile from '../SmallTile'\n\nexport default class CategoryIndex extends Component {\n  /* * * * * * * * * * * * * * * * *\n   *\n   * CONSTRUCTOR\n   *\n   * * * * * * * * * * * * * * * * */\n  constructor () {\n    super()\n    this.state = { nb_displayed: 4 }\n    this.c = 'home-municipales__category-index'\n    this.handleShowMoreClick = this.handleShowMoreClick.bind(this)\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * HANDLE SHOW MORE CLICK\n   *\n   * * * * * * * * * * * * * * * * */\n  handleShowMoreClick () {\n    this.setState({ nb_displayed: this.state.nb_displayed + 8 })\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * RENDER\n   *\n   * * * * * * * * * * * * * * * * */\n  render () {\n    const { c, props, state } = this\n\n    /* Assign classes */\n    const classes = [c]\n    classes.push(`${c}_${props.category.category}`)\n    if (props.articles.length > state.nb_displayed) classes.push(`${c}_display-show-more`)\n\n    /* Display */\n    return <div className={classes.join(' ')}>\n      <div className={`${c}-title`}>\n        <Slug big><JSXInterpreter content={props.category.category_name} /></Slug>\n      </div>\n      <div className={`${c}-list`}>{\n        props.articles\n          .slice(0, state.nb_displayed)\n          .map(art => <div\n            className={`${c}-article`}\n            key={art.article_url || Math.random().toString(36)}>\n            <SmallTile {...art} />\n          </div>)\n      }</div>\n      <div className={`${c}-show-more`} onClick={this.handleShowMoreClick}>\n        <Paragraph small><a>Voir plus</a></Paragraph>\n      </div>\n    </div>\n  }\n}\n","import React, { Component } from 'react'\nimport Paragraph from 'libe-components/lib/text-levels/Paragraph'\nimport JSXInterpreter from 'libe-components/lib/logic/JSXInterpreter'\n\nexport default class FiltersBlock extends Component {\n  constructor () {\n    super()\n    this.c = 'home-municipales__filters-block'\n    this.handleFilterClick = this.handleFilterClick.bind(this)\n  }\n\n  handleFilterClick (e, cat) {\n    // if (props.activateCategory) props.activateCategory(cat.category)\n  }\n\n  render () {\n    const { c, props } = this\n    const {\n      active: activeCategory,\n      categories,\n      activateCategory\n    } = props\n\n    /* Inner logic */\n    const categoriesWithDots = []\n    categories.forEach(cat => {\n      const catClasses = [`${c}-filter`]\n      catClasses.push(`${c}-filter_${cat.category}`)\n      if (!activeCategory || cat.category === activeCategory) {\n        catClasses.push(`${c}-filter_active`)\n      }\n      categoriesWithDots.push(\n        <button\n          disabled\n          key={cat.category}\n          className={catClasses.join(' ')}\n          onClick={e => this.handleFilterClick(e, cat)}>\n          <Paragraph><JSXInterpreter content={cat.category_name} /></Paragraph>\n        </button>\n      )\n      categoriesWithDots.push(<div\n        key={`${cat.category}-separator`}\n        className={`${c}-filter-separator`}>\n        <Paragraph>•</Paragraph>\n      </div>)\n    })\n    categoriesWithDots.pop()\n\n    /* Assign classes */\n    const classes = [c]\n    if (!activeCategory) classes.push(`${c}_all-active`)\n\n    /* Display */\n    return <div className={classes.join(' ')}>{\n      categoriesWithDots\n    }\n    </div>\n  }\n}\n","import React, { Component } from 'react'\nimport { parseTsv } from 'libe-utils'\nimport Loader from 'libe-components/lib/blocks/Loader'\nimport LoadingError from 'libe-components/lib/blocks/LoadingError'\nimport ShareArticle from 'libe-components/lib/blocks/ShareArticle'\nimport LibeLaboLogo from 'libe-components/lib/blocks/LibeLaboLogo'\nimport ArticleMeta from 'libe-components/lib/blocks/ArticleMeta'\nimport Svg from 'libe-components/lib/primitives/Svg'\nimport PageTitle from 'libe-components/lib/text-levels/PageTitle'\nimport Paragraph from 'libe-components/lib/text-levels/Paragraph'\nimport AnnotationTitle from 'libe-components/lib/text-levels/AnnotationTitle'\nimport Tile from './components/Tile'\nimport CategoryIndex from './components/CategoryIndex'\nimport FiltersBlock from './components/FiltersBlock'\n\nexport default class App extends Component {\n  /* * * * * * * * * * * * * * * * *\n   *\n   * CONSTRUCTOR\n   *\n   * * * * * * * * * * * * * * * * */\n  constructor () {\n    super()\n    this.c = 'home-municipales'\n    this.nb_tiles = 8\n    Object.defineProperty(\n      this,\n      'nb_tiles',\n      { get: () => window.LBLB_GLOBAL.current_display === 'lg' ? 8 : 4 }\n    )\n    this.state = {\n      loading_sheet: true,\n      error_sheet: null,\n      data_sheet: [],\n      keystrokes_history: [],\n      konami_mode: false,\n      active_category: null,\n      scrolled: false\n    }\n    this.fetchSheet = this.fetchSheet.bind(this)\n    this.fetchCredentials = this.fetchCredentials.bind(this)\n    this.listenToKeyStrokes = this.listenToKeyStrokes.bind(this)\n    this.watchForKonamiCode = this.watchForKonamiCode.bind(this)\n    this.activateCategory = this.activateCategory.bind(this)\n    this.isInFilter = this.isInFilter.bind(this)\n    this.scrollToFirstActiveArticle = this.scrollToFirstActiveArticle.bind(this)\n    this.toggleScrolledState = this.toggleScrolledState.bind(this)\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * DID MOUNT\n   *\n   * * * * * * * * * * * * * * * * */\n  componentDidMount () {\n    document.addEventListener('keydown', this.listenToKeyStrokes)\n    document.addEventListener('scroll', this.toggleScrolledState)\n    this.fetchCredentials()\n    if (this.props.spreadsheet) return this.fetchSheet()\n    return this.setState({ loading_sheet: false })\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * WILL UNMOUNT\n   *\n   * * * * * * * * * * * * * * * * */\n  componentWillUnmount () {\n    document.removeEventListener('keydown', this.listenToKeyStrokes)\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * SHOULD UPDATE\n   *\n   * * * * * * * * * * * * * * * * */\n  shouldComponentUpdate (props, nextState) {\n    const changedKeys = []\n    Object.keys(nextState).forEach(key => {\n      if (this.state[key] !== nextState[key]) changedKeys.push(key)\n    })\n    if (changedKeys.length === 1 &&\n      changedKeys.includes('keystrokes_history')) return false\n    return true\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * FETCH CREDENTIALS\n   *\n   * * * * * * * * * * * * * * * * */\n  async fetchCredentials () {\n    const { api_url } = this.props\n    const { format, article } = this.props.tracking\n    const api = `${api_url}/${format}/${article}/load`\n    try {\n      const reach = await window.fetch(api, { method: 'POST' })\n      const response = await reach.json()\n      const { lblb_tracking, lblb_posting } = response._credentials\n      if (!window.LBLB_GLOBAL) window.LBLB_GLOBAL = {}\n      window.LBLB_GLOBAL.lblb_tracking = lblb_tracking\n      window.LBLB_GLOBAL.lblb_posting = lblb_posting\n      return { lblb_tracking, lblb_posting }\n    } catch (error) {\n      console.error('Unable to fetch credentials:')\n      console.error(error)\n      return Error(error)\n    }\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * FETCH SHEET\n   *\n   * * * * * * * * * * * * * * * * */\n  async fetchSheet () {\n    this.setState({ loading_sheet: true, error_sheet: null })\n    const sheet = this.props.spreadsheet\n    try {\n      const reach = await window.fetch(this.props.spreadsheet)\n      if (!reach.ok) throw reach\n      const data = await reach.text()\n      const parsedData = parseTsv(data, [9])[0]\n      this.setState({ loading_sheet: false, error_sheet: null, data_sheet: parsedData })\n      document.querySelector('#temp-header').innerHTML = ''\n      return data\n    } catch (error) {\n      if (error.status) {\n        const text = `${error.status} error while fetching : ${sheet}`\n        this.setState({ loading_sheet: false, error_sheet: error })\n        console.error(text, error)\n        return Error(text)\n      } else {\n        this.setState({ loading_sheet: false, error_sheet: error })\n        console.error(error)\n        return Error(error)\n      }\n    }\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * START LISTENING TO KEYSTROKES\n   *\n   * * * * * * * * * * * * * * * * */\n  listenToKeyStrokes (e) {\n    if (!e || !e.keyCode) return\n    const currHistory = this.state.keystrokes_history\n    const newHistory = [...currHistory, e.keyCode]\n    this.setState({ keystrokes_history: newHistory })\n    this.watchForKonamiCode()\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * WATCH FOR KONAMI CODE\n   *\n   * * * * * * * * * * * * * * * * */\n  watchForKonamiCode () {\n    const konamiCodeStr = '38,38,40,40,37,39,37,39,66,65'\n    const lastTenKeys = this.state.keystrokes_history.slice(-10)\n    if (lastTenKeys.join(',') === konamiCodeStr) this.setState({ konami_mode: true })\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * ACTIVATE CATEGORY\n   *\n   * * * * * * * * * * * * * * * * */\n  activateCategory (category) {\n    const nextCategory = category !== this.state.active_category\n      ? category\n      : null\n    this.setState(\n      { active_category: nextCategory },\n      this.scrollToFirstActiveArticle\n    )\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * IS IN FILTER\n   *\n   * * * * * * * * * * * * * * * * */\n  isInFilter (article) {\n    const activeCategory = this.state.active_category\n    return !activeCategory ||\n      article.category === activeCategory\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * SCROLL TO FIRST ACTIVE ARTICLE\n   *\n   * * * * * * * * * * * * * * * * */\n  scrollToFirstActiveArticle () {\n    const { active_category: activeCategory } = this.state\n    if (!activeCategory) {\n      return window.scrollTo({\n        top: 0,\n        left: 0,\n        behavior: 'smooth'\n      })\n    }\n    const indexOfFirst = this.state.data_sheet.findIndex(art => this.isInFilter(art))\n    const $destination = indexOfFirst < this.nb_tiles\n      ? document.querySelector(`.home-municipales__tile_${indexOfFirst + 1}`)\n      : document.querySelector(`.home-municipales__category-index_${activeCategory}`)\n    const destinationDistance = $destination.getBoundingClientRect().y\n    const destinationPosition = destinationDistance + window.scrollY\n    const navHeight = window.LBLB_GLOBAL.nav_height\n    const rem = window.LBLB_GLOBAL.rem\n    window.scrollTo({\n      top: destinationPosition - navHeight - 3.5 * rem,\n      left: 0,\n      behavior: 'smooth'\n    })\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * TOGGLE SCROLLED STATE\n   *\n   * * * * * * * * * * * * * * * * */\n  toggleScrolledState (e) {\n    const pScrollY = window.LBLB_GLOBAL.pScrollY || 0\n    if (pScrollY < 180 && window.scrollY >= 180) this.setState({ scrolled: true })\n    else if (pScrollY >= 180 && window.scrollY < 180) this.setState({ scrolled: false })\n    window.LBLB_GLOBAL.pScrollY = window.scrollY\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * RENDER\n   *\n   * * * * * * * * * * * * * * * * */\n  render () {\n    const { c, state, props } = this\n    const articles = this.state.data_sheet\n\n    /* Inner logic */\n    const categoriesWithRank = []\n    articles.forEach(article => {\n      const found = categoriesWithRank.find(e => e.category === article.category)\n      if (!found) { \n        categoriesWithRank.push({\n          category: article.category,\n          category_name: article.category_name,\n          occurences: 1\n        })\n       } else {\n         found.occurences++\n       }\n    })\n    const categories = [...categoriesWithRank]\n    const currentCategory = categories[0] ? categories[0].category : ''\n    const currentCategoryName = categories[0] ? categories[0].category_name : ''\n    const noCapNoHtmlCurrentCategoryName = `${(currentCategoryName[0] || '').toLowerCase()}${currentCategoryName.slice(1).replace(/&nbsp;/igm, ' ')}`\n    const tweetText = `A lire ce mois-ci dans Les dossiers du fil vert : ${noCapNoHtmlCurrentCategoryName} via @libe`\n    const articlesInCurrentCategory = articles.filter(art => art.category === currentCategory)\n    const nbOfTilesToDisplay = articlesInCurrentCategory.length >= 6 && articlesInCurrentCategory.length <= 12\n      ? articlesInCurrentCategory.length\n      : articlesInCurrentCategory.length < 6\n      ? 6\n      : 12\n    const hideCurrentCategoryInSmallTiles = nbOfTilesToDisplay === articlesInCurrentCategory.length\n\n    /* Assign classes */\n    const classes = [c]\n    classes.push(`${c}_${nbOfTilesToDisplay}-tiles`)\n    if (state.loading_sheet) classes.push(`${c}_loading`)\n    if (state.error_sheet) classes.push(`${c}_error`)\n    if (state.scrolled) classes.push(`${c}_scrolled`)\n\n    /* Load & errors */\n    if (state.loading_sheet) return <div className={classes.join(' ')}><div className='lblb-default-apps-loader'><Loader /></div></div>\n    if (state.error_sheet) return <div className={classes.join(' ')}><div className='lblb-default-apps-error'><LoadingError /></div></div>\n\n    /* Display component */\n    return <div className={classes.join(' ')}>\n\n      {/* Header */}\n      <div className={`${c}__header`}>\n        <div\n          className={`${c}__header-logo`}\n          onClick={e => this.activateCategory(null)}>\n          <Svg src='./logo.svg' />\n        </div>\n        <div className={`${c}__header-filters`}>\n          <div\n            className={`${c}__header-filters-title`}\n            onClick={e => this.activateCategory(null)}>\n            <PageTitle>Les dossiers du fil vert</PageTitle>\n          </div>\n          <div className={`${c}__header-filters-list`}>\n            <FiltersBlock\n              categories={categories.map(e => ({\n                category_name: e.category_name,\n                category: e.category\n              })).slice(0, 1)}\n              activateCategory={this.activateCategory}\n              active={state.active_category} />\n          </div>\n        </div>\n      </div>\n\n      {/* Scroll to top */}\n      <div\n        className={`${c}__scroll-to-top`}\n        onClick={e => this.activateCategory(null)}>\n        <Svg src='./logo.svg' />\n        <AnnotationTitle>Retour à la une</AnnotationTitle>\n      </div>\n\n      {/* Fixed header mobile */}\n      <div\n        className={`${c}__fixed-header-mobile`}\n        style={{ top: window.LBLB_GLOBAL.nav_height }}>\n        <div\n          onClick={e => this.activateCategory(null)}\n          className={`${c}__fixed-header-mobile-logo`}>\n          <Paragraph>\n            Les dossiers<br />\n            du fil vert\n          </Paragraph>\n        </div>\n        <div\n          onClick={e => this.activateCategory(null)}\n          className={`${c}__fixed-header-mobile-filters`}>\n          <Paragraph>↑ Filtres</Paragraph>\n        </div>\n      </div>\n\n      {/* Tiles */}\n      <div className={`${c}__tiles`}>{\n        articlesInCurrentCategory.map((article, i) => {\n          console.log(article)\n          return i === 0\n            ? <Tile\n              pos={i + 1}\n              {...article}\n              textSizes={{ big: true }}\n              key={article.display_title}\n              dataCategory={article.category}\n              active={this.isInFilter(article)} />\n            : i < 4\n            ?  <Tile\n              pos={i + 1}\n              {...article}\n              textSizes={{ regular: true }}\n              key={article.display_title}\n              dataCategory={article.category}\n              active={this.isInFilter(article)} />\n            : <Tile\n              pos={i + 1}\n              {...article}\n              textSizes={{ small: true }}\n              key={article.display_title}\n              dataCategory={article.category}\n              active={this.isInFilter(article)} />\n        })\n      }</div>\n\n      {/* Categories detail */}\n      <div className={`${c}__categories`}>\n        {!hideCurrentCategoryInSmallTiles\n          && categories.length !== 1\n          && <div className={`${c}__categories-title`}>\n            <Paragraph>Retrouvez tous les dossiers du fil vert</Paragraph>\n          </div>}\n        <div className={`${c}__categories-list`}>{\n          categories\n            .map(category => {\n              if (hideCurrentCategoryInSmallTiles\n                && category.category === currentCategory) return\n              const categoryArticles = articles\n                .filter(art => art.category === category.category)\n              return <CategoryIndex\n                key={category.category}\n                articles={categoryArticles}\n                category={category} />\n            })\n        }\n        </div>\n      </div>\n\n      {/* Footer */}\n      <div className='lblb-default-apps-footer'>\n        <ShareArticle\n          short\n          iconsOnly\n          tweet={tweetText}\n          url={props.meta.url} />\n        <LibeLaboLogo target='blank' />\n      </div>\n    </div>\n  }\n}\n","import React, { Component } from 'react'\nimport ReactDOM from 'react-dom'\nimport { Helmet } from 'react-helmet'\nimport * as serviceWorker from './serviceWorker'\nimport App from './App'\nimport config from './config'\nimport 'whatwg-fetch'\n\nclass AppWrapper extends Component {\n  /* * * * * * * * * * * * * * * * *\n   *\n   * CONSTRUCTOR\n   *\n   * * * * * * * * * * * * * * * * */\n  constructor (props) {\n    super(props)\n    this.getElementsHeight = this.getElementsHeight.bind(this)\n    if (!window.LBLB_GLOBAL) window.LBLB_GLOBAL = {}\n    window.LBLB_GLOBAL.rem = 16\n    window.LBLB_GLOBAL.breakpoints = {\n      lg: { min: 1 + 63 * window.LBLB_GLOBAL.rem, max: Infinity },\n      md: { min: 1 + 40 * window.LBLB_GLOBAL.rem, max: 63 * window.LBLB_GLOBAL.rem },\n      sm: { min: 0, max: 40 * window.LBLB_GLOBAL.rem }\n    }\n    Object.defineProperty(window.LBLB_GLOBAL, 'current_display', {\n      get: function () {\n        return Object.keys(this.breakpoints).find(name => {\n          return this.breakpoints[name].min <= this.client_width &&\n            this.breakpoints[name].max >= this.client_width\n        })\n      }\n    })\n    window.setInterval(this.getElementsHeight, 250)\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * WILL UNMOUNT\n   *\n   * * * * * * * * * * * * * * * * */\n  componentWillUnmount () {\n    window.clearInterval(this.getElementsHeight)\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * DID MOUNT\n   *\n   * * * * * * * * * * * * * * * * */\n  componentDidMount () {\n    if (config.show_header) {\n      const headerScript = document.createElement('script')\n      headerScript.setAttribute('type', 'text/javascript')\n      headerScript.setAttribute('src', 'https://www.liberation.fr/menu/script.js')\n      document.body.appendChild(headerScript)\n    }\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * GET HEADER HEIGHT\n   *\n   * * * * * * * * * * * * * * * * */\n  getElementsHeight () {\n    const $nav = document.querySelector('.header-fix-nav')\n    const $body = document.querySelector('body')\n    const pNavHeight = window.LBLB_GLOBAL.nav_height\n    const pBodyPaddingTop = window.LBLB_GLOBAL.body_padding_top\n    const pClientWidth = window.LBLB_GLOBAL.client_width\n    const pClientHeight = window.LBLB_GLOBAL.client_height\n    const navHeight = $nav ? $nav.offsetHeight : 0\n    const bodyPaddingTop = $body ? parseFloat(window.getComputedStyle($body)['padding-top'].slice(0, -2)) : 0\n    const clientWidth = document.documentElement.clientWidth\n    const clientHeight = document.documentElement.clientHeight\n    const pCurrentDisplay = window.LBLB_GLOBAL.current_display\n    window.LBLB_GLOBAL.nav_height = navHeight\n    window.LBLB_GLOBAL.body_padding_top = bodyPaddingTop\n    window.LBLB_GLOBAL.client_width = clientWidth\n    window.LBLB_GLOBAL.client_height = clientHeight\n    if (pNavHeight !== navHeight ||\n      pBodyPaddingTop !== bodyPaddingTop ||\n      pClientWidth !== clientWidth ||\n      pClientHeight !== clientHeight) {\n      window.dispatchEvent(new CustomEvent('lblb-client-dimensions-change'))\n    }\n    if (pCurrentDisplay !== window.LBLB_GLOBAL.current_display) {\n      window.dispatchEvent(new CustomEvent('lblb-client-display-change'))\n    }\n  }\n\n  /* * * * * * * * * * * * * * * * *\n   *\n   * RENDER\n   *\n   * * * * * * * * * * * * * * * * */\n  render () {\n    const { props } = this\n    const { meta, statics_url, stylesheet } = props\n    const { title, url, description, author, image } = meta\n    return <div id='libe-labo-app-wrapper'>\n      <Helmet>\n        <title>Libération.fr – {title}</title>\n        <link rel='canonical' href={url} />\n        <meta name='author' content={author} />\n        <meta name='description' content={description} />\n        <meta property='og:url' content={url} />\n        <meta property='og:title' content={title} />\n        <meta property='og:description' content={description} />\n        <meta property='og:image' content={image} />\n        <meta name='twitter:url' content={url} />\n        <meta name='twitter:title' content={title} />\n        <meta name='twitter:description' content={description} />\n        <meta name='twitter:image' content={image} />\n        {/* Libé styles */}\n        <link rel='stylesheet' href={`${statics_url}/styles/liberation.css`} />\n        {/* Libe Labo styles */}\n        <link rel='stylesheet' href={`${statics_url}/lib/normalize-8.0.0.css`} />\n        <link rel='stylesheet' href={`${statics_url}/styles/fonts.css`} />\n        <link rel='stylesheet' href={`${statics_url}/styles/font-classes.css`} />\n        <link rel='stylesheet' href={`${statics_url}/styles/components.css`} />\n        <link rel='stylesheet' href={`${statics_url}/styles/apps.css`} />\n        {/* Leaflet styles */}\n        <link rel='stylesheet' href={`${statics_url}/lib/leaflet-1.4.0/leaflet.css`} />\n        {/* This app styles */}\n        <link rel='stylesheet' href={`${statics_url}/styles/apps/${stylesheet}`} />\n        <link rel='stylesheet' href='./custom.css' />\n      </Helmet>\n      <App {...props} />\n    </div>\n  }\n}\n\nReactDOM.render(\n  <AppWrapper {...config} />,\n  document.getElementById('libe-labo-app-root')\n)\n\nserviceWorker.unregister()\n","const currentProtocol = typeof window !== 'undefined' ? window.location.protocol : 'http:'\nconst currentHostname = typeof window !== 'undefined' ? window.location.hostname : 'localhost'\n\nconst config = {\n  meta: {\n    author: 'Libé Labo',\n    title: 'Les dossiers du Fil vert',\n    url: 'https://www.liberation.fr/apps/les-dossiers-du-fil-vert',\n    description: '«Libération» met l\\'accent sur l\\'écologie et décrypte chaque mois une thématique de l\\'actualité environnementale dans un dossier de fond.',\n    image: '/apps/les-dossiers-du-fil-vert/social.jpg',\n    xiti_id: 'les-dossiers-du-fil-vert',\n    tweet: ''\n  },\n  tracking: {\n    active: false,\n    format: 'les-dossiers-du-fil-vert',\n    article: 'home-municipales-2020'\n  },\n  show_header: true,\n  statics_url: process.env.NODE_ENV === 'production'\n    ? 'https://www.liberation.fr/apps/static'\n    : `${currentProtocol}//${currentHostname}:3003`,\n  api_url: process.env.NODE_ENV === 'production'\n    ? 'https://libe-labo-2.site/api'\n    : `${currentProtocol}//${currentHostname}:3004/api`,\n  stylesheet: 'home-municipales.css',\n  spreadsheet: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQVTpXiMkmWiUGeIqFPoagvKjALYlJWUx7EhdSsM9RQB5TpS-NvnmWdjgGNJV7yOo6AaE60fLsQ_7IV/pub?output=tsv'\n}\n\nmodule.exports = config\n"],"sourceRoot":""}